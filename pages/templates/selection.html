<!DOCTYPE html>
<html lang="en">
<head>
  <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js"></script>
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"/>
  <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css"/>

  <style>
      html, body {
          width: 100%;
          height: 100%;
          margin: 0;
          padding: 0;
      }
      #map {
          width: 100%;
          height: 100%;
          min-height: 600px;
      }
  </style>

  <meta charset="UTF-8" />
  <title>Selection</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='selection.css') }}">
</head>
<body>
  <div class="columns">
    <!-- LEFT COLUMN -->
    <div class="routeList">
      <div class="route">
        <p class="routeName">Route 1</p>
        <div class="routeInfo">
          <p>distance</p>
          <p>ETA</p>
          <p>rating</p>
          <button class="favorite"><img src="{{ url_for('static', filename='FavNoFill.png') }}" alt="favorite"></button>
        </div>
      </div>

      <div class="route">
        <p class="routeName">Route 2</p>
        <div class="routeInfo">
          <p>distance</p>
          <p>ETA</p>
          <p>rating</p>
          <button class="favorite"><img src="{{ url_for('static', filename='FavNoFill.png') }}" alt="favorite"></button>
        </div>
      </div>

      <div class="route">
        <p class="routeName">Route 3</p>
        <div class="routeInfo">
          <p>distance</p>
          <p>ETA</p>
          <p>rating</p>
          <button class="favorite"><img src="{{ url_for('static', filename='FavNoFill.png') }}" alt="favorite"></button>
        </div>
      </div>

      <div class="route">
        <p class="routeName">Route 4</p>
        <div class="routeInfo">
          <p>distance</p>
          <p>ETA</p>
          <p>rating</p>
          <button class="favorite"><img src="{{ url_for('static', filename='FavNoFill.png') }}" alt="favorite"></button>
        </div>
      </div>

      <div class="route">
        <p class="routeName">Route 5</p>
        <div class="routeInfo">
          <p>distance</p>
          <p>ETA</p>
          <p>rating</p>
          <button class="favorite"><img src="{{ url_for('static', filename='FavNoFill.png') }}" alt="favorite"></button>
        </div>
      </div>

    </div>


    <!-- RIGHT COLUMN -->
    <div class="columnTwo">

      <div class="filterBar">
        <select id="tagFilter">
          <option>Filter for tags</option>
        </select>
      </div>

      <div class="mapView">
        <div id="map"></div>
      </div>

      <div class="selectionOptions">
        Additional info about a route currently being previewed,
        such as any reported paths on its route, tags.
        <button id="favoriteRoute">Favorite</button>
        <a href="/route-view"><button id="startRoute">Start Directions</button></a>
      </div>

      <!-- Leaflet map script -->
      <script>
        var map = L.map('map').setView([39.25, -76.71], 16);

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19
        }).addTo(map);

        var path = {{ path|tojson }};
        console.log("Raw path nodes:", path);

        if (path) {
            var latlngs = path.map(function(geojson) {
                var geom = JSON.parse(geojson);
                return [geom.coordinates[1], geom.coordinates[0]];
            });

            var routeLine = L.polyline(latlngs, {color: 'blue'}).addTo(map);
            map.fitBounds(routeLine.getBounds());

            window.routeNodes = latlngs;
        }
      </script>

    </div>
  </div>
</body>
</html>

<!--
    The top 5 routes should be loaded into the left sidebar, with the option to load more
    as well. the map should appear on the right side, and under the map should show more
    details about the route, as well as the option to start using this route.
-->
